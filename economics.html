<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Economics â€” JojoJubah</title>
  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">

  <!-- Banner-only CSS fixes -->
  <style>
    .ticker-wrapper {
      display: flex;
      width: max-content;
      animation: ticker-scroll 30s linear infinite;
    }
    .ticker-track {
      display: flex;
    }
    .ticker-item {
      padding: 0 1.5rem;
      white-space: nowrap;
    }
    @keyframes ticker-scroll {
      0%   { transform: translateX(0); }
      100% { transform: translateX(-50%); }
    }
  </style>
</head>

<body>
  <!-- Header/Nav -->
  <header>
    <nav class="navbar">
      <div class="container">
        <a href="index.html" class="logo">
          <span class="logo-text">JojoJubah</span>
        </a>
        <button class="menu-toggle" aria-label="Toggle navigation">â˜°</button>
        <div class="nav-links">
          <a href="index.html">Home</a>
          <a href="economics.html" class="active">Economics</a>
          <a href="labs.html">Labs</a>
          <a href="https://www.youtube.com/@jojojubah" target="_blank" rel="noopener">YouTube</a>
        </div>
      </div>
    </nav>
  </header>

  <main>
    <!-- Hero -->
    <section id="home" style="min-height:60vh;display:flex;align-items:center;justify-content:center;text-align:center">
      <div class="container">
        <h1 class="hero-title">Welcome to <span class="gradient-text">Economics</span></h1>
        <p class="hero-subtitle">Plain-English notes on money, markets, and decisionsâ€”made for creators.</p>
      </div>
    </section>

    <!-- Market Banner (fixed) -->
    <section id="market-banner">
      <div class="ticker-container">
        <div class="ticker-content">
          <div class="ticker-wrapper">
            <div class="ticker-track" id="tickerTrack1">
              <span class="ticker-item">ðŸ“Š Loading market data...</span>
            </div>
            <div class="ticker-track" id="tickerTrack2">
              <span class="ticker-item">ðŸ“Š Loading market data...</span>
            </div>
          </div>
        </div>
        <button id="refreshBanner" class="ticker-refresh" aria-label="Refresh market data" title="Refresh market data">
          <span class="refresh-icon">ðŸ”„</span>
        </button>
      </div>
    </section>

    <!-- Projects -->
    <section class="projects container" id="projects" style="margin-top:2rem">
      <h2 class="section-title">Quick Economics Notes</h2>
      <div class="projects-grid">
        <div class="project-card fade-in">
          <div class="project-content">
            <h3 class="project-title">Inflation Basics</h3>
            <p class="project-description">
              Inflation is the general rise in prices over time, which reduces your purchasing power. If your money grows
              slower than prices rise, you can buy less with the same pound. We'll cover CPI, core inflation, and how
              central banks respond.
            </p>
          </div>
        </div>

        <div class="project-card fade-in">
          <div class="project-content">
            <h3 class="project-title">Compounding</h3>
            <p class="project-description">
              Compounding lets your returns earn returns. Small, consistent gains (in skills, money, or habits)
              all compound when you keep the flywheel turning.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Assistant -->
    <section class="assistant container" id="assistant">
      <h2 class="section-title">Ask the Assistant</h2>
      <div class="chat-container">
        <div id="chatMessages" class="chat-messages">
          <div class="message bot-message">
            <div class="message-content">Hi! Iâ€™m your economics assistant. Ask me anything.</div>
          </div>
        </div>
        <div class="chat-input">
          <input id="messageInput" type="text" placeholder="Type your questionâ€¦" autocomplete="off"/>
          <button id="sendButton" class="btn">Send</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container footer-grid">
      <div class="footer-col">
        <h4>JojoJubah</h4>
        <p>Notes and tools to make economics clearer for creators.</p>
      </div>
      <div class="footer-col">
        <h4>Links</h4>
        <ul class="footer-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="economics.html">Economics</a></li>
          <li><a href="labs.html">Labs</a></li>
          <li><a href="https://www.youtube.com/@jojojubah" target="_blank" rel="noopener">YouTube</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">Â© <span id="year"></span> JojoJubah</div>
  </footer>

  <!-- Scripts -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFunctions, httpsCallable } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-functions.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCBnpzb54f0WbeIDgvdj4T0HRb3a2NdCgY",
      authDomain: "jojojubah-f2996.firebaseapp.com",
      projectId: "jojojubah-f2996",
      storageBucket: "jojojubah-f2996.appspot.com",
      messagingSenderId: "657950730640",
      appId: "1:657950730640:web:0b1b0c7ebd1b24b6f1f3ab"
    };

    const app = initializeApp(firebaseConfig);
    const functions = getFunctions(app);

    // --- Banner fix ---
    async function loadMarketBanner() {
      const track1 = document.getElementById("tickerTrack1");
      const track2 = document.getElementById("tickerTrack2");

      try {
        const getMarketBanner = httpsCallable(functions, "getMarketBanner");
        const result = await getMarketBanner();

        if (result?.data?.banner) {
          const itemsMarkup = result.data.banner
            .split(/â€¢/g)
            .map((txt, i, arr) =>
              `<span class="ticker-item">${txt.trim()}${i < arr.length - 1 ? " â€¢" : ""}</span>`
            )
            .join("");

          track1.innerHTML = itemsMarkup;
          track2.innerHTML = itemsMarkup;
        }
      } catch (err) {
        const errorText = "ðŸ“Š Market data unavailable";
        track1.innerHTML = `<span class="ticker-item">${errorText}</span>`;
        track2.innerHTML = `<span class="ticker-item">${errorText}</span>`;
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      loadMarketBanner();
      document.getElementById("refreshBanner")
        .addEventListener("click", () => loadMarketBanner());
    });

    // Chat assistant logic unchanged...
  </script>
</body>
</html>
